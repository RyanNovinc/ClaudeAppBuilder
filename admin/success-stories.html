<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin: Success Stories - AppFoundry</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Admin Panel Styles */
        :root {
            --admin-primary: #0070f3;
            --admin-secondary: #6b7280;
            --admin-success: #10b981;
            --admin-warning: #fbbf24;
            --admin-danger: #ef4444;
            --admin-bg: #f9fafb;
            --admin-card-bg: #ffffff;
            --admin-border: #e5e7eb;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--admin-bg);
            color: #111827;
        }
        
        .admin-container {
            display: flex;
            min-height: 100vh;
        }
        
        .admin-sidebar {
            width: 250px;
            background-color: var(--admin-card-bg);
            border-right: 1px solid var(--admin-border);
            padding: 30px 0;
            flex-shrink: 0;
        }
        
        .admin-sidebar-header {
            padding: 0 20px;
            margin-bottom: 30px;
        }
        
        .admin-logo {
            font-weight: 700;
            font-size: 1.4rem;
            color: var(--admin-primary);
            margin-bottom: 10px;
        }
        
        .admin-version {
            font-size: 0.8rem;
            color: var(--admin-secondary);
        }
        
        .admin-nav {
            margin-bottom: 20px;
        }
        
        .admin-nav-title {
            padding: 0 20px;
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--admin-secondary);
            margin-bottom: 10px;
        }
        
        .admin-nav-item {
            padding: 10px 20px;
            display: flex;
            align-items: center;
            text-decoration: none;
            color: #4b5563;
            transition: background-color 0.2s;
        }
        
        .admin-nav-item:hover {
            background-color: #f3f4f6;
        }
        
        .admin-nav-item.active {
            background-color: #e0f2ff;
            color: var(--admin-primary);
            font-weight: 500;
        }
        
        .admin-nav-icon {
            margin-right: 10px;
            width: 20px;
            text-align: center;
        }
        
        .admin-main {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
        }
        
        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }
        
        .admin-title {
            font-size: 1.5rem;
            font-weight: 600;
        }
        
        .admin-controls {
            display: flex;
            gap: 10px;
        }
        
        .admin-button {
            background-color: var(--admin-primary);
            color: white;
            border: none;
            border-radius: 6px;
            padding: 8px 16px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .admin-button:hover {
            background-color: #0055b3;
        }
        
        .admin-button.secondary {
            background-color: white;
            color: #4b5563;
            border: 1px solid var(--admin-border);
        }
        
        .admin-button.secondary:hover {
            background-color: #f3f4f6;
        }
        
        .admin-card {
            background-color: var(--admin-card-bg);
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            overflow: hidden;
        }
        
        .admin-card-header {
            padding: 15px 20px;
            border-bottom: 1px solid var(--admin-border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .admin-card-title {
            font-weight: 600;
            font-size: 1.1rem;
        }
        
        .admin-card-content {
            padding: 20px;
        }
        
        .admin-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .admin-table th {
            text-align: left;
            padding: 12px 20px;
            border-bottom: 1px solid var(--admin-border);
            color: var(--admin-secondary);
            font-weight: 500;
            font-size: 0.9rem;
        }
        
        .admin-table td {
            padding: 12px 20px;
            border-bottom: 1px solid var(--admin-border);
        }
        
        .admin-table tr:last-child td {
            border-bottom: none;
        }
        
        .admin-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        
        .admin-badge.pending {
            background-color: #fff7ed;
            color: #c2410c;
        }
        
        .admin-badge.approved {
            background-color: #ecfdf5;
            color: #047857;
        }
        
        .admin-badge.rejected {
            background-color: #fef2f2;
            color: #b91c1c;
        }
        
        .admin-action-button {
            background: none;
            border: none;
            color: var(--admin-primary);
            cursor: pointer;
            padding: 5px;
            border-radius: 4px;
            transition: background-color 0.2s;
        }
        
        .admin-action-button:hover {
            background-color: #e0f2ff;
        }
        
        .admin-action-button.danger {
            color: var(--admin-danger);
        }
        
        .admin-action-button.danger:hover {
            background-color: #fee2e2;
        }
        
        .admin-pagination {
            display: flex;
            justify-content: center;
            margin-top: 20px;
        }
        
        .admin-pagination-item {
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 5px;
            border-radius: 6px;
            cursor: pointer;
            user-select: none;
        }
        
        .admin-pagination-item:hover {
            background-color: #f3f4f6;
        }
        
        .admin-pagination-item.active {
            background-color: var(--admin-primary);
            color: white;
        }
        
        .admin-empty-state {
            padding: 50px 20px;
            text-align: center;
            color: var(--admin-secondary);
        }
        
        .admin-empty-state-icon {
            font-size: 48px;
            margin-bottom: 20px;
            opacity: 0.5;
        }
        
        .admin-empty-state-title {
            font-size: 1.1rem;
            font-weight: 500;
            margin-bottom: 10px;
        }
        
        .admin-form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .admin-form-group {
            margin-bottom: 20px;
        }
        
        .admin-form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        .admin-form-group input,
        .admin-form-group textarea,
        .admin-form-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--admin-border);
            border-radius: 6px;
            font-size: 0.95rem;
        }
        
        .admin-form-group textarea {
            min-height: 100px;
        }
        
        /* Modal styles */
        .admin-modal-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            display: none;
        }
        
        .admin-modal {
            background-color: white;
            border-radius: 8px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        
        .admin-modal-header {
            padding: 15px 20px;
            border-bottom: 1px solid var(--admin-border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .admin-modal-title {
            font-weight: 600;
            font-size: 1.1rem;
        }
        
        .admin-modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--admin-secondary);
        }
        
        .admin-modal-body {
            padding: 20px;
        }
        
        .admin-modal-footer {
            padding: 15px 20px;
            border-top: 1px solid var(--admin-border);
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }
        
        .admin-user-info {
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--admin-border);
        }
        
        .admin-story-content {
            margin-bottom: 20px;
        }
        
        .admin-story-content h3 {
            margin-bottom: 10px;
            font-weight: 600;
            font-size: 1rem;
        }
        
        .admin-story-content p {
            margin-bottom: 15px;
            line-height: 1.6;
        }
        
        .admin-story-images {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }
        
        .admin-story-image {
            width: 100%;
            height: 120px;
            border-radius: 6px;
            object-fit: cover;
        }
        
        .admin-info-row {
            display: flex;
            margin-bottom: 10px;
        }
        
        .admin-info-label {
            width: 120px;
            font-weight: 500;
            color: var(--admin-secondary);
        }
        
        .admin-info-value {
            flex: 1;
        }
        
        .admin-search {
            display: flex;
            margin-bottom: 20px;
        }
        
        .admin-search input {
            flex: 1;
            padding: 10px;
            border: 1px solid var(--admin-border);
            border-radius: 6px 0 0 6px;
            font-size: 0.95rem;
        }
        
        .admin-search button {
            background-color: var(--admin-primary);
            color: white;
            border: none;
            border-radius: 0 6px 6px 0;
            padding: 0 15px;
            cursor: pointer;
        }
        
        @media (max-width: 768px) {
            .admin-container {
                flex-direction: column;
            }
            
            .admin-sidebar {
                width: 100%;
                padding: 15px 0;
            }
            
            .admin-main {
                padding: 15px;
            }
            
            .admin-form-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="admin-container">
        <div class="admin-sidebar">
            <div class="admin-sidebar-header">
                <div class="admin-logo">AppFoundry</div>
                <div class="admin-version">Admin Panel v1.0</div>
            </div>
            
            <div class="admin-nav">
                <div class="admin-nav-title">Content</div>
                <a href="#" class="admin-nav-item">
                    <span class="admin-nav-icon">📊</span>
                    Dashboard
                </a>
                <a href="#" class="admin-nav-item active">
                    <span class="admin-nav-icon">📱</span>
                    Success Stories
                </a>
                <a href="#" class="admin-nav-item">
                    <span class="admin-nav-icon">👥</span>
                    Users
                </a>
            </div>
            
            <div class="admin-nav">
                <div class="admin-nav-title">Settings</div>
                <a href="#" class="admin-nav-item">
                    <span class="admin-nav-icon">⚙️</span>
                    General
                </a>
                <a href="#" class="admin-nav-item">
                    <span class="admin-nav-icon">🔒</span>
                    Security
                </a>
                <a href="../index.html" class="admin-nav-item">
                    <span class="admin-nav-icon">🏠</span>
                    Back to Site
                </a>
            </div>
        </div>
        
        <div class="admin-main">
            <div class="admin-header">
                <h1 class="admin-title">Success Stories</h1>
                <div class="admin-controls">
                    <button class="admin-button secondary" id="refresh-button">Refresh</button>
                    <button class="admin-button">Add New Story</button>
                </div>
            </div>
            
            <div class="admin-card">
                <div class="admin-card-header">
                    <div class="admin-card-title">Manage Success Stories</div>
                    <div class="admin-controls">
                        <button class="admin-button secondary">Filter</button>
                    </div>
                </div>
                <div class="admin-search">
                    <input type="text" placeholder="Search by name, app name, or content...">
                    <button>🔍</button>
                </div>
                <div class="admin-card-content">
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>App Name</th>
                                <th>Type</th>
                                <th>Submission Date</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="stories-table-body">
                            <!-- This is where the story data will be loaded -->
                            <!-- Initial placeholder data -->
                            <tr>
                                <td>Sarah Johnson</td>
                                <td>SleepTrack</td>
                                <td>Health & Fitness</td>
                                <td>Apr 15, 2025</td>
                                <td><span class="admin-badge approved">Approved</span></td>
                                <td>
                                    <button class="admin-action-button" onclick="viewStory('1')">View</button>
                                    <button class="admin-action-button" onclick="editStory('1')">Edit</button>
                                    <button class="admin-action-button danger" onclick="confirmDelete('1')">Delete</button>
                                </td>
                            </tr>
                            <tr>
                                <td>Michael Chen</td>
                                <td>RecipeKeeper</td>
                                <td>Lifestyle</td>
                                <td>Apr 22, 2025</td>
                                <td><span class="admin-badge pending">Pending</span></td>
                                <td>
                                    <button class="admin-action-button" onclick="viewStory('2')">View</button>
                                    <button class="admin-action-button" onclick="editStory('2')">Edit</button>
                                    <button class="admin-action-button danger" onclick="confirmDelete('2')">Delete</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <!-- Empty state (shown when no stories) -->
                    <div class="admin-empty-state" style="display: none;">
                        <div class="admin-empty-state-icon">📱</div>
                        <div class="admin-empty-state-title">No Success Stories Yet</div>
                        <p>When students submit their success stories, they'll appear here.</p>
                    </div>
                </div>
            </div>
            
            <div class="admin-pagination">
                <div class="admin-pagination-item">«</div>
                <div class="admin-pagination-item active">1</div>
                <div class="admin-pagination-item">2</div>
                <div class="admin-pagination-item">3</div>
                <div class="admin-pagination-item">»</div>
            </div>
        </div>
    </div>
    
    <!-- View Story Modal -->
    <div class="admin-modal-backdrop" id="view-story-modal">
        <div class="admin-modal">
            <div class="admin-modal-header">
                <div class="admin-modal-title">View Success Story</div>
                <button class="admin-modal-close" onclick="closeModal('view-story-modal')">&times;</button>
            </div>
            <div class="admin-modal-body">
                <div class="admin-user-info">
                    <div class="admin-info-row">
                        <div class="admin-info-label">Name:</div>
                        <div class="admin-info-value" id="view-name">Sarah Johnson</div>
                    </div>
                    <div class="admin-info-row">
                        <div class="admin-info-label">Email:</div>
                        <div class="admin-info-value" id="view-email">sarah@example.com</div>
                    </div>
                    <div class="admin-info-row">
                        <div class="admin-info-label">App Name:</div>
                        <div class="admin-info-value" id="view-app-name">SleepTrack</div>
                    </div>
                    <div class="admin-info-row">
                        <div class="admin-info-label">App Type:</div>
                        <div class="admin-info-value" id="view-app-type">Health & Fitness</div>
                    </div>
                    <div class="admin-info-row">
                        <div class="admin-info-label">Submission Date:</div>
                        <div class="admin-info-value" id="view-date">April 15, 2025</div>
                    </div>
                    <div class="admin-info-row">
                        <div class="admin-info-label">Status:</div>
                        <div class="admin-info-value" id="view-status"><span class="admin-badge approved">Approved</span></div>
                    </div>
                </div>
                
                <div class="admin-story-content">
                    <h3>Testimonial (Short Version for Display)</h3>
                    <p id="view-testimonial">"I had zero coding experience but managed to build a sleep tracking app in just 3 weeks using the AppFoundry method. The step-by-step process made it so easy!"</p>
                    
                    <h3>Full Success Story</h3>
                    <p id="view-story">I've always wanted to create an app to help with my sleep tracking, but I was intimidated by the coding required. When I found the AppFoundry course, I was skeptical that I could really build something without coding knowledge, but I decided to give it a try.

The step-by-step guidance was incredible. I followed each module, and within 3 weeks, I had a working app that tracks sleep patterns, sends reminders, and even generates reports. My friends were shocked when I told them I built it myself without writing code!

The most valuable part was learning how to communicate effectively with Claude AI to get exactly what I wanted. Now I can make changes and improvements whenever I need to, without being dependent on expensive developers.

Thanks to AppFoundry, I've gone from having zero technical skills to being able to bring my ideas to life independently!</p>
                    
                    <h3>App Screenshots</h3>
                    <div class="admin-story-images" id="view-images">
                        <img src="https://placeholder.pics/svg/300x200" alt="App Screenshot" class="admin-story-image">
                        <img src="https://placeholder.pics/svg/300x200" alt="App Screenshot" class="admin-story-image">
                    </div>
                </div>
            </div>
            <div class="admin-modal-footer">
                <button class="admin-button secondary" onclick="closeModal('view-story-modal')">Close</button>
                <button class="admin-button" id="approve-button">Approve</button>
                <button class="admin-button secondary" id="reject-button">Reject</button>
            </div>
        </div>
    </div>
    
    <!-- Edit Story Modal -->
    <div class="admin-modal-backdrop" id="edit-story-modal">
        <div class="admin-modal">
            <div class="admin-modal-header">
                <div class="admin-modal-title">Edit Success Story</div>
                <button class="admin-modal-close" onclick="closeModal('edit-story-modal')">&times;</button>
            </div>
            <div class="admin-modal-body">
                <form id="edit-story-form">
                    <div class="admin-form-grid">
                        <div class="admin-form-group">
                            <label for="edit-name">Name</label>
                            <input type="text" id="edit-name" value="Sarah Johnson">
                        </div>
                        <div class="admin-form-group">
                            <label for="edit-email">Email</label>
                            <input type="email" id="edit-email" value="sarah@example.com" readonly>
                        </div>
                        <div class="admin-form-group">
                            <label for="edit-app-name">App Name</label>
                            <input type="text" id="edit-app-name" value="SleepTrack">
                        </div>
                        <div class="admin-form-group">
                            <label for="edit-app-type">App Type</label>
                            <select id="edit-app-type">
                                <option>Health & Fitness</option>
                                <option>Productivity</option>
                                <option>Lifestyle</option>
                                <option>Business</option>
                                <option>Education</option>
                                <option>Entertainment</option>
                                <option>Social</option>
                                <option>Other</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="admin-form-group">
                        <label for="edit-testimonial">Testimonial (Short Version for Display)</label>
                        <textarea id="edit-testimonial">"I had zero coding experience but managed to build a sleep tracking app in just 3 weeks using the AppFoundry method. The step-by-step process made it so easy!"</textarea>
                    </div>
                    
                    <div class="admin-form-group">
                        <label for="edit-story">Full Success Story</label>
                        <textarea id="edit-story">I've always wanted to create an app to help with my sleep tracking, but I was intimidated by the coding required. When I found the AppFoundry course, I was skeptical that I could really build something without coding knowledge, but I decided to give it a try.

The step-by-step guidance was incredible. I followed each module, and within 3 weeks, I had a working app that tracks sleep patterns, sends reminders, and even generates reports. My friends were shocked when I told them I built it myself without writing code!

The most valuable part was learning how to communicate effectively with Claude AI to get exactly what I wanted. Now I can make changes and improvements whenever I need to, without being dependent on expensive developers.

Thanks to AppFoundry, I've gone from having zero technical skills to being able to bring my ideas to life independently!</textarea>
                    </div>
                    
                    <div class="admin-form-group">
                        <label>Status</label>
                        <div>
                            <label style="display: inline; margin-right: 15px;">
                                <input type="radio" name="status" value="pending"> Pending
                            </label>
                            <label style="display: inline; margin-right: 15px;">
                                <input type="radio" name="status" value="approved" checked> Approved
                            </label>
                            <label style="display: inline;">
                                <input type="radio" name="status" value="rejected"> Rejected
                            </label>
                        </div>
                    </div>
                </form>
            </div>
            <div class="admin-modal-footer">
                <button class="admin-button secondary" onclick="closeModal('edit-story-modal')">Cancel</button>
                <button class="admin-button" onclick="saveStory()">Save Changes</button>
            </div>
        </div>
    </div>
    
    <!-- Delete Confirmation Modal -->
    <div class="admin-modal-backdrop" id="delete-modal">
        <div class="admin-modal" style="max-width: 400px;">
            <div class="admin-modal-header">
                <div class="admin-modal-title">Confirm Deletion</div>
                <button class="admin-modal-close" onclick="closeModal('delete-modal')">&times;</button>
            </div>
            <div class="admin-modal-body">
                <p>Are you sure you want to delete this success story? This action cannot be undone.</p>
            </div>
            <div class="admin-modal-footer">
                <button class="admin-button secondary" onclick="closeModal('delete-modal')">Cancel</button>
                <button class="admin-button" style="background-color: var(--admin-danger);" onclick="deleteStory()">Delete</button>
            </div>
        </div>
    </div>
    
    <script>
        // Sample data for demonstration
        const stories = [
            {
                id: '1',
                name: 'Sarah Johnson',
                email: 'sarah@example.com',
                appName: 'SleepTrack',
                appType: 'Health & Fitness',
                date: 'April 15, 2025',
                status: 'approved',
                testimonial: '"I had zero coding experience but managed to build a sleep tracking app in just 3 weeks using the AppFoundry method. The step-by-step process made it so easy!"',
                story: 'I\'ve always wanted to create an app to help with my sleep tracking, but I was intimidated by the coding required. When I found the AppFoundry course, I was skeptical that I could really build something without coding knowledge, but I decided to give it a try.\n\nThe step-by-step guidance was incredible. I followed each module, and within 3 weeks, I had a working app that tracks sleep patterns, sends reminders, and even generates reports. My friends were shocked when I told them I built it myself without writing code!\n\nThe most valuable part was learning how to communicate effectively with Claude AI to get exactly what I wanted. Now I can make changes and improvements whenever I need to, without being dependent on expensive developers.\n\nThanks to AppFoundry, I\'ve gone from having zero technical skills to being able to bring my ideas to life independently!',
                images: ['https://placeholder.pics/svg/300x200', 'https://placeholder.pics/svg/300x200']
            },
            {
                id: '2',
                name: 'Michael Chen',
                email: 'michael@example.com',
                appName: 'RecipeKeeper',
                appType: 'Lifestyle',
                date: 'April 22, 2025',
                status: 'pending',
                testimonial: '"I\'ve been wanting to build this app for years but was intimidated by coding. The AppFoundry course made it possible for me to create exactly what I envisioned!"',
                story: 'As someone who loves cooking, I\'ve always wanted a custom recipe app that works exactly how I want it to. I looked at existing apps, but none of them had the specific features I needed.\n\nI had no coding experience and quotes from developers were way out of my budget. When I discovered AppFoundry, it seemed too good to be true - build my own custom app without coding?\n\nBut it actually worked! Following the course, I was able to create a recipe app that lets me organize recipes by cuisine, dietary restrictions, and cooking time. It even has a meal planning feature that I designed myself!\n\nThe best part is that I can continue to improve it whenever I want. Last week I added a feature to automatically generate shopping lists from selected recipes, and it took me just a few hours!',
                images: ['https://placeholder.pics/svg/300x200']
            }
        ];
        
        // Current story being viewed/edited
        let currentStoryId = null;
        
        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            // Load stories into the table
            refreshStoriesTable();
            
            // Set up event listeners
            document.getElementById('refresh-button').addEventListener('click', refreshStoriesTable);
            document.getElementById('approve-button').addEventListener('click', approveStory);
            document.getElementById('reject-button').addEventListener('click', rejectStory);
        });
        
        // Refresh the stories table
        function refreshStoriesTable() {
            const tableBody = document.getElementById('stories-table-body');
            const emptyState = document.querySelector('.admin-empty-state');
            
            // Clear the table
            tableBody.innerHTML = '';
            
            // Check if there are any stories
            if (stories.length === 0) {
                tableBody.style.display = 'none';
                emptyState.style.display = 'block';
                return;
            }
            
            // Hide empty state and show table
            tableBody.style.display = 'table-row-group';
            emptyState.style.display = 'none';
            
            // Add each story to the table
            stories.forEach(story => {
                const row = document.createElement('tr');
                
                const statusBadgeClass = {
                    'pending': 'pending',
                    'approved': 'approved',
                    'rejected': 'rejected'
                }[story.status] || 'pending';
                
                // Format date to be shorter
                const shortDate = story.date.substring(0, 6); // "Apr 15" instead of "April 15, 2025"
                
                row.innerHTML = `
                    <td>${story.name}</td>
                    <td>${story.appName}</td>
                    <td>${story.appType}</td>
                    <td>${shortDate}</td>
                    <td><span class="admin-badge ${statusBadgeClass}">${story.status.charAt(0).toUpperCase() + story.status.slice(1)}</span></td>
                    <td>
                        <button class="admin-action-button" onclick="viewStory('${story.id}')">View</button>
                        <button class="admin-action-button" onclick="editStory('${story.id}')">Edit</button>
                        <button class="admin-action-button danger" onclick="confirmDelete('${story.id}')">Delete</button>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }
        
        // View a story
        function viewStory(id) {
            currentStoryId = id;
            const story = stories.find(s => s.id === id);
            
            if (!story) return;
            
            // Fill in the modal fields
            document.getElementById('view-name').textContent = story.name;
            document.getElementById('view-email').textContent = story.email;
            document.getElementById('view-app-name').textContent = story.appName;
            document.getElementById('view-app-type').textContent = story.appType;
            document.getElementById('view-date').textContent = story.date;
            document.getElementById('view-testimonial').textContent = story.testimonial;
            document.getElementById('view-story').textContent = story.story;
            
            // Set status badge
            const statusBadgeClass = {
                'pending': 'pending',
                'approved': 'approved',
                'rejected': 'rejected'
            }[story.status] || 'pending';
            
            document.getElementById('view-status').innerHTML = `
                <span class="admin-badge ${statusBadgeClass}">${story.status.charAt(0).toUpperCase() + story.status.slice(1)}</span>
            `;
            
            // Show/hide approve/reject buttons based on current status
            const approveButton = document.getElementById('approve-button');
            const rejectButton = document.getElementById('reject-button');
            
            if (story.status === 'pending') {
                approveButton.style.display = 'block';
                rejectButton.style.display = 'block';
            } else if (story.status === 'approved') {
                approveButton.style.display = 'none';
                rejectButton.style.display = 'block';
            } else if (story.status === 'rejected') {
                approveButton.style.display = 'block';
                rejectButton.style.display = 'none';
            }
            
            // Fill in images
            const imagesContainer = document.getElementById('view-images');
            imagesContainer.innerHTML = '';
            
            if (story.images && story.images.length > 0) {
                story.images.forEach(imageUrl => {
                    const img = document.createElement('img');
                    img.src = imageUrl;
                    img.alt = 'App Screenshot';
                    img.className = 'admin-story-image';
                    imagesContainer.appendChild(img);
                });
            } else {
                imagesContainer.innerHTML = '<p>No screenshots provided</p>';
            }
            
            // Show the modal
            openModal('view-story-modal');
        }
        
        // Edit a story
        function editStory(id) {
            currentStoryId = id;
            const story = stories.find(s => s.id === id);
            
            if (!story) return;
            
            // Fill in the form fields
            document.getElementById('edit-name').value = story.name;
            document.getElementById('edit-email').value = story.email;
            document.getElementById('edit-app-name').value = story.appName;
            
            // Set the app type dropdown
            const appTypeSelect = document.getElementById('edit-app-type');
            for (let i = 0; i < appTypeSelect.options.length; i++) {
                if (appTypeSelect.options[i].text === story.appType) {
                    appTypeSelect.selectedIndex = i;
                    break;
                }
            }
            
            document.getElementById('edit-testimonial').value = story.testimonial;
            document.getElementById('edit-story').value = story.story;
            
            // Set status radio buttons
            const statusRadios = document.getElementsByName('status');
            for (let i = 0; i < statusRadios.length; i++) {
                if (statusRadios[i].value === story.status) {
                    statusRadios[i].checked = true;
                    break;
                }
            }
            
            // Show the modal
            openModal('edit-story-modal');
        }
        
        // Save edited story
        function saveStory() {
            if (!currentStoryId) return;
            
            const story = stories.find(s => s.id === currentStoryId);
            if (!story) return;
            
            // Get values from form
            story.name = document.getElementById('edit-name').value;
            story.appName = document.getElementById('edit-app-name').value;
            story.appType = document.getElementById('edit-app-type').options[document.getElementById('edit-app-type').selectedIndex].text;
            story.testimonial = document.getElementById('edit-testimonial').value;
            story.story = document.getElementById('edit-story').value;
            
            // Get status
            const statusRadios = document.getElementsByName('status');
            for (let i = 0; i < statusRadios.length; i++) {
                if (statusRadios[i].checked) {
                    story.status = statusRadios[i].value;
                    break;
                }
            }
            
            // In a real application, you would save this to your backend here
            console.log('Saving story:', story);
            
            // Refresh the table and close the modal
            refreshStoriesTable();
            closeModal('edit-story-modal');
            
            // Show a temporary success message
            alert('Story updated successfully!');
        }
        
        // Confirm deletion
        function confirmDelete(id) {
            currentStoryId = id;
            openModal('delete-modal');
        }
        
        // Delete a story
        function deleteStory() {
            if (!currentStoryId) return;
            
            // Find the index of the story
            const index = stories.findIndex(s => s.id === currentStoryId);
            if (index === -1) return;
            
            // Remove the story
            stories.splice(index, 1);
            
            // In a real application, you would delete this from your backend here
            console.log('Deleted story ID:', currentStoryId);
            
            // Refresh the table and close the modal
            refreshStoriesTable();
            closeModal('delete-modal');
            
            // Show a temporary success message
            alert('Story deleted successfully!');
        }
        
        // Approve a story
        function approveStory() {
            if (!currentStoryId) return;
            
            const story = stories.find(s => s.id === currentStoryId);
            if (!story) return;
            
            story.status = 'approved';
            
            // In a real application, you would update this on your backend here
            console.log('Approved story ID:', currentStoryId);
            
            // Refresh the table and close the modal
            refreshStoriesTable();
            closeModal('view-story-modal');
            
            // Show a temporary success message
            alert('Story approved successfully!');
        }
        
        // Reject a story
        function rejectStory() {
            if (!currentStoryId) return;
            
            const story = stories.find(s => s.id === currentStoryId);
            if (!story) return;
            
            story.status = 'rejected';
            
            // In a real application, you would update this on your backend here
            console.log('Rejected story ID:', currentStoryId);
            
            // Refresh the table and close the modal
            refreshStoriesTable();
            closeModal('view-story-modal');
            
            // Show a temporary success message
            alert('Story rejected successfully!');
        }
        
        // Open a modal
        function openModal(modalId) {
            document.getElementById(modalId).style.display = 'flex';
        }
        
        // Close a modal
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }
